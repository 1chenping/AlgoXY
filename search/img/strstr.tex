% figure to illustrate match a substring in a text.
\ifdefined\includetikz\relax \else
%\documentclass{standalone}
\documentclass{article}
\usepackage{tikz}
\usepackage{amsmath}
\usetikzlibrary{matrix,positioning}
\begin{document}
\fi

\begin{tikzpicture}[
scale=0.7,
array/.style={matrix of nodes,
              minimum height=5mm, text width=2mm,
              nodes={draw, align=center, anchor=south},
              %column sep=-\pgflinewidth,
              %row sep=0.5mm,
              nodes in empty cells
              %row 1/.style={nodes={draw=none, fill=none, minimum size=5mm}},
              %row 1 column 1/.style={nodes={draw}}
              }]

%any ananthous ananym flower
\matrix[array] (mytext) {
a & n & y & & a & n & a & n & t & h & o & u & s & & a & n & a & n & y & m & & f & l & o & w & e & r \\};
\node[right=1cm of mytext] {T};

%ananym
\matrix[array,
  anchor=west] at ([yshift=-3cm, xshift=-0.5cm]mytext-1-5) (myptn) {
a & n & a & n & y & m \\};
\node[right=1cm of myptn] {P};

% offset s
\draw[->] ([yshift=-2.7cm]mytext-1-1.south west) -- node[above] {s} ([yshift=-2.7cm]mytext-1-4.south east);

% matches chars so far.
\foreach \i/\j in {5/1, 6/2, 7/3, 8/4} {
  \draw[<->] (mytext-1-\i.south) -- (myptn-1-\j.north);
}

% matched count q.
\draw (myptn-1-1.south) -- ++(0, -1.2cm);
\draw (myptn-1-4.south) -- ++(0, -1.2cm);
\draw[<->] ([yshift=-1cm]myptn-1-1.south) -- node[above] {q} ([yshift=-1cm]myptn-1-4.south);

\end{tikzpicture}

\ifdefined\includetikz\relax \else
\end{document}
\fi
